% Wrap lines in code blocks, and add border around them.
\usepackage{fvextra}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{breaklines,breaknonspaceingroup,breakanywhere,frame=single,framesep=8pt,rulecolor=\color[HTML]{aaaaaa},commandchars=\\\{\}}

% Disable figures floating.
% <https://stackoverflow.com/a/58840456/667158>
\usepackage{float}
\let\origfigure\figure
\let\endorigfigure\endfigure
\renewenvironment{figure}[1][2] {
  \expandafter\origfigure\expandafter[H]
} {
  \endorigfigure
}

\directlua{
  luaotfload.add_fallback("noto-sans", { "Noto Sans CJK SC:mode=harf;", "Apple Color Emoji:mode=harf;" })
  luaotfload.add_fallback("noto-serif", { "Noto Serif CJK SC:mode=harf;", "Apple Color Emoji:mode=harf;" })
  luaotfload.add_fallback("noto-mono", { "Noto Sans Mono CJK SC:mode=harf;", "Noto Sans CJK SC:mode=harf;", "Apple Color Emoji:mode=harf;" })
}
\setmainfont{Helvetica Neue}[RawFeature={fallback=noto-sans}]
\setsansfont{Lato}[RawFeature={fallback=noto-sans}]
\setmonofont{Cartograph CF}[RawFeature={fallback=noto-mono}]
