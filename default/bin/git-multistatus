#!/usr/bin/env bash

set -e
set -u
[ -n "${DEBUG:-}" ] && set -x || true

function main() {
  unset GIT_DIR

  for arg; do
    if ! [ -d "$arg" ]; then
      continue
    fi

    local directory="$(starship module -P "$arg" -p ~ directory)"
    local git_branch="$(starship module -p "$arg" git_branch)"
    local git_status="$(starship module -p "$arg" git_status)"

    echo $'\001\e[30m\002'".- $directory$git_branch$git_status"
  done
}

main "$@"
