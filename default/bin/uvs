#!/usr/bin/env bash

set -e
set -u
[ -n "${DEBUG:-}" ] && set -x || true

if [ $# -eq 0 ]; then
  set -- x.py
  if [ ! -f x.py ]; then
    cat > x.py << 'EOF'
#!/usr/bin/env -S uv run --script
# /// script
# dependencies = []
# ///
EOF
  fi
fi

if [ -f pyproject.toml ] || [ -f uv.lock ]; then
  exec uv run "$@"
else
  exec uv run --script "$@"
fi
