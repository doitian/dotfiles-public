#!/bin/bash

function main() {
  local -a args=("$@")
  local argc="$#"
  local destination="${args[argc - 1]}"

  while [ -h "$destination" ]; do
    destination=$(readlink "$destination")
  done

  args[argc-1]="$destination"

  exec cp "${args[@]}"
}

main "$@"
