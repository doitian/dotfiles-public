#!/usr/bin/env bash

set -e
set -u
[ -n "${DEBUG:-}" ] && set -x || true

case "${1:-}" in
"--rofi")
    shift
    if [ "$#" = 0 ]; then
        gopass list -f
    else
        gopass show -c "$@" >/dev/null &
    fi
    ;;
"--fuzzel")
    shift
    gopass list -f | fuzzel -w 50 | xargs -L1 -r gopass -c
    ;;
*)
    export GPG_TTY="$(tty)"
    gopass list -f | fzf | xargs -L1 -r gopass "$@"
    ;;
esac
