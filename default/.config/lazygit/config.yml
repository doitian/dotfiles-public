# yaml-language-server: $schema=https://json.schemastore.org/lazygit.json
promptToReturnFromSubprocess: false
os:
  editPreset: nvim
git:
  paging:
    pager: delta --paging=never
  autoFetch: false
gui:
  scrollHeight: 20
  theme:
    activeBorderColor:
      - "#40a02b" # Green
      - bold
    inactiveBorderColor:
      - "#4c4f69" # Text
    optionsTextColor:
      - "#1e66f5" # Blue
    selectedLineBgColor:
      - "#ccd0da" # Surface0
    selectedRangeBgColor:
      - "#ccd0da" # Surface0
    cherryPickedCommitBgColor:
      - "#179299" # Teal
    cherryPickedCommitFgColor:
      - "#1e66f5" # Blue
    unstagedChangesColor:
      - red # Red

customCommands:
  - key: I
    command: "git-ai-commit"
    context: status
    subprocess: true
    description: "Git with message generated by AI"
  - key: I
    command: "git-ai-commit"
    context: files
    subprocess: true
    description: "Git with message generated by AI"
  - key: G
    command: "gh repo view --web"
    context: files
    description: "Open repo in GitHub"
  - key: G
    command: "gh pr view --web"
    context: localBranches
    description: "Open pull request in GitHub"
  - key: E
    context: commitFiles
    subprocess: true
    # - When a file is selected, open the file before the commit
    # - When a directory is selected, open the commit changes limited to that directory
    command: |
      {{if .SelectedCommitFile}}
      git show '{{.SelectedLocalCommit.Sha}}^:{{.SelectedCommitFile.Name}}' |\
      nvim -Rm - +"let b:fname = 'file git://{{.SelectedLocalCommit.Sha}}^/{{.SelectedCommitFile.Name}}'" \
      {{else}}
      git show '{{.SelectedLocalCommit.Sha}}' -- git show {{.SelectedCommitFilePath}} |\
      nvim -Rm - +"let b:fname = 'file git://{{.SelectedLocalCommit.Sha}}/{{.SelectedCommitFilePath}}.patch'" \
      {{end}}--cmd 'set mls=0' \
             +'nnoremap <buffer> q <Cmd>quit<CR>' \
             +"exec 'file '.fnameescape(b:fname) | unlet b:fname | set mls=5 | silent! filetype detect"
