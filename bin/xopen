#!/bin/bash
UNAME=`uname -s`
if [ "$UNAME" = "Darwin" ]; then
    exec open "$@"
fi

for arg; do
  if [ "$arg" = '-' ]; then
    arg=$(xclip -o)
  fi

  if [ -z "$arg" -o -d "$arg" ]; then
    if runningx; then
      xranger &>/dev/null &
    else
      ranger
    fi
  elif [ -f "$arg" ]; then
    if runningx; then
      run-mailcap "$arg" || xdg-open "$arg"
    else
      run-mailcap "$arg"
    fi
  fi
done

